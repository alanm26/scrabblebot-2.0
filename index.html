<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Word Finder</title>
  </head>
  <body>
    <h1>Word Finder</h1>
    <form id="form">
      <label for="input-box">Enter letters:</label>
      <input type="text" id="input-box" name="input-box">
      <button type="submit">Find Words</button>
    </form>
    <div id="result-box"></div>
    <script>
      // Function to check if a given string can form a word
      function canFormWord(str, word) {
        // Check if the string contains all the letters of the word
        for (let i = 0; i < word.length; i++) {
          if (str.indexOf(word[i]) === -1) {
            return false;
          }
          str = str.slice(0, str.indexOf(word[i])) + str.slice(str.indexOf(word[i]) + 1);
        }
        // Check if the string does not contain the word itself in order
        if (str.indexOf(word) !== -1) {
          return false;
        }
        return true;
      }

      // Function to filter the list of words based on the given string
      function filterWords(str, words) {
        const result = {};
        for (let i = 0; i < words.length; i++) {
          const line = words[i].toLowerCase();
          const [mainCategory, subCategory, ...subWords] = line.split(',');
          const wordsArray = subWords.join(',').split(' ');
          const subCategoryWords = [];
          for (let j = 0; j < wordsArray.length; j++) {
            const word = wordsArray[j];
            if (canFormWord(str.toLowerCase(), word)) {
              subCategoryWords.push(word);
            }
          }
          if (subCategoryWords.length > 0) {
            if (!result[mainCategory]) {
              result[mainCategory] = {};
            }
            if (!result[mainCategory][subCategory]) {
              result[mainCategory][subCategory] = subCategoryWords;
            } else {
              result[mainCategory][subCategory].push(...subCategoryWords);
            }
          }
        }
        return result;
      }

      // Function to handle the form submit event
      function handleSubmit(event) {
        event.preventDefault();
        const str = document.getElementById('input-box').value;
        fetch('words.txt')
          .then(response => response.text())
          .then(text => {
            const words = text.split('\n');
            const filteredWords = filterWords(str, words);
            const resultBox = document.getElementById('result-box');
            resultBox.innerHTML = '';
            for (const mainCategory in filteredWords) {
              resultBox.innerHTML += '<h2>' + mainCategory + '</h2>';
              for (const subCategory in filteredWords[mainCategory]) {
                resultBox.innerHTML += '<h3>' + subCategory + '</h3>';
                resultBox.innerHTML += '<p>' + filteredWords[mainCategory][subCategory].join(', ') + '</p>';
              }
            }
            if (resultBox.innerHTML === '') {
              resultBox.innerHTML = '<p>No words found</p>';
            }
          });
      }

      // Add event listener to the form submit event
      const form = document.getElementById('form');
      form.addEventListener('submit', handleSubmit);
    </script>
  </body>
</html>
